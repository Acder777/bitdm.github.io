---
layout: page
mathjax: true
permalink: /2018/projects/p16/midterm/
---

## 项目进展报告

### 数据获取及预处理

> 描述项目中使用的数据来源，数据的规模等情况
> 数据是否需要预处理

#### 数据获取：
数据来自天池大数据竞赛题——口碑商家客流量预测，其提供从2015.07.01到2016.10.31（除去2015.12.12）的商家数据，用户支付行为数据以及用户浏览行为数据。提供数据的类型统一为string类型，提交预测的类型为整形。文件统一为utf-8编码，没有标题行，并以“,”分隔的csv格式。包括shop_info.csv(商家特征数据)、user_pay.csv(用户支付行为)、user_view.csv(用户浏览行为)、prediction.csv(测试集与提交格式)
  外部数据分为机场天气数据和节假日信息两部分，天气数据来源为https://www.wunderground.com， 节假日信息来源为比赛官方论坛。

#### 数据预处理：
数据预处理包含三部分，通过规则清除，通过模型预训练清除及仅保留销量统计信息。

##### 规则清除：
(1)原始数据中，存在单用户某小时内大量购买的现象，如userID为9594359用户在2016年1月30日在shopID为878的商家累计购买了209次。针对此类现象，对于单个用户单小时内的购买数量x，采用对x取对数处理消除异常消费;

(2)商家初始入驻口碑平台存在一定的启动时间，同时销售过程中会在销量中断的现象，如下图shopID为1072的商家所示。针对此类现象，开业前7天数据不用于训练集，销量间断前后3天数据不用于训练集。

(3)销量以历史过去14天销量的μ±2σ为限制，其中μ为均值，σ为均方根，以排除异常的销量数。

##### 模型预训练清除
商家日销量，可能存在一些难以预计的大幅波动，如促销，商家停业等。对于这些规则难以清除的异常值，采用预训练的方式清除。模型训练中首先采用欠拟合的算法模型预训练，并清除残差最大的10%(xgboost1,GBDT)和25%(xgboost2)的样本。

##### 仅保留销量统计信息
由于只需要预测商家的日销量，无需识别单个用户的行为，按照大数定理，可以只针对分时段的浏览与购买总数进行预测。因而在数据清洗后，保留的数据仅按小时统计商户总销量，在这一步剔除了用户ID，使得数据量仅为原始的约1/10.

### 数据分析与可视化

> 描述对数据进行探索性分析的结果，采用可视化的技术呈现

对于原始数据和通过数据预处理步骤中的规则清除后得到的过滤数据的可视化对比，可清晰直观的反映和剔除原始数据中的异常数据。

### 模型选取

> 选择了哪些数据挖掘方法对数据进行分析与挖掘，及选择的理由

最终销量预测结果由未来14天常规销量预测及双11修正系数预测两步两部分组成。通过双11修正系数，分别对于2016-11-11，2016-11-12，2016-11-13三天的销量按照1.0，0.2，0.1倍的系数作乘法修正。双11修正部分训练采用xgboost单模型，特征为商家特征信息，标签为上一年（2015年）双11当天的销量增量百分比。常规销量预测部分，采用基本模型有4套，分别为2套xgboost模型(特征处理及数据清洗程度不同)，GBDT模型和均值模型。

### 挖掘实验的结果

> 进行数据挖掘后得到的结果

### 存在的问题

> 到目前为止，遇到哪些问题，及解决方法或思路

### 下一步工作

> 准备如何完成后续的工作
